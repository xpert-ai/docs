---
title: "递归次数限制"
description: "递归次数限制错误排查指南"
---

# 递归次数限制

## 概述

递归次数限制错误表示工作流或智能体在执行过程中达到了递归调用的最大次数限制，导致执行被终止。

## 错误原因

### 常见原因

1. **循环调用**: 工作流中存在循环调用，导致无限递归
2. **递归深度过大**: 递归调用深度超过了系统限制
3. **配置错误**: 工作流配置错误导致递归调用
4. **逻辑错误**: 业务逻辑错误导致无限循环

## 排查步骤

### 1. 检查工作流配置

1. 检查工作流中是否存在循环调用
2. 检查子流程调用是否形成循环
3. 检查条件分支是否导致无限循环

### 2. 检查递归调用

1. 查看工作流执行日志
2. 识别递归调用的起点
3. 分析递归调用的路径
4. 找出导致无限递归的原因

### 3. 修复问题

1. **添加终止条件**: 为递归调用添加终止条件
2. **限制递归深度**: 设置递归深度限制
3. **重构工作流**: 重构工作流避免循环调用
4. **添加检查点**: 添加检查点防止无限循环

## 解决方案

### 方案一：添加终止条件

在工作流中添加终止条件，确保递归调用能够正常结束：

```
如果 (递归次数 > 最大限制) {
  终止执行
  返回错误
}
```

### 方案二：限制递归深度

在配置中设置递归深度限制：

1. 进入工作流配置
2. 设置最大递归深度
3. 保存配置

### 方案三：重构工作流

重构工作流，避免循环调用：

1. 识别循环调用的部分
2. 使用迭代节点替代递归调用
3. 重新设计工作流逻辑

## 预防措施

1. **设计审查**: 在设计工作流时避免循环调用
2. **测试验证**: 充分测试工作流，确保不会无限递归
3. **监控告警**: 设置监控告警，及时发现递归问题
4. **文档记录**: 记录工作流设计，便于排查问题

## 相关文档

- [错误处理](/zh-cn/智能体AI 平台/工作流/错误处理)
- [子流程](/zh-cn/智能体AI 平台/工作流/子流程)
- [逻辑分支(路由)](/zh-cn/智能体AI 平台/工作流/逻辑分支(路由))
